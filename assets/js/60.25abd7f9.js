(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{499:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAf8AAAB/CAYAAADhNsvSAAAOpklEQVR4Ae3dWYgcZRcG4Libhbgg7iiKGxhFUcQ9NyooooIXwSgKGkWjRIPiBl4piiBeuIKgaC5UXBAhUeNGjN64EBGNG16IC26gxjXG5fs5DT1/VXclM9U9XVPD9zQMszBT1d85z8x7arq6esaMGTOSNzVggAEGGGAgDwMppcj9PBZrnfrMAAMMMMDAjMh+4Q+CPwYMMMAAAzkZEP7+6+EhHwYYYICBzAwI/8wantNka62O5BhggIFqA8Jf+Jv4GWCAAQYyMyD8M2u4Kbh6ClYXdWGAgZwMCH/hb+JngAEGGMjMgPDPrOE5TbbW6kiOAQYYqDYg/IW/iZ8BBhhgIDMDwj+zhpuCq6dgdVEXBhjIyYDwF/4mfgYYYICBzAwI/8wantNka62O5BhggIFqA8Jf+Jv4GWCAAQYyMyD8M2u4Kbh6ClYXdWGAgZwMCH/hb+JngAEGGMjMgPDPrOE5TbbW6kiOAQYYqDZQK/y33nrrdPjhh6cLL7wwXXXVVWnhwoXppJNOSnvvvbep0RDBAAMMMMDANDGwyfCfOXNmuvTSS9NDDz2U3n333fTXX3/F91fe3n///XTrrbemfffdd5PN32yzzdLvv/8+0rfbb7997D7E/a6zv2+//TatXbs2rV69Ot11113p1FNPTVEH02P19Kgu6sIAAwxMPwMR5DOqGrdgwYL0+eefVwb9pr64fv36zhAwZ86cysCM8B/17c477xzb90cffTT07qIO8+bNG9tmVb18bfrh1zM9Y4CBXA1EMPaF/3XXXTd0YK5ZsybNnTu3LzCnY/hHMX7++ed08skn960nVzjW7Y8mAwwwMH0N9IX/ueeem/77779S+P/777/p6aefThdffHE67bTT0qGHHpoOOOCAzuP9F110Ubr//vvTn3/+WfqZ+OTVV19N22yzTSkwI/yfe+65Cb1F4BZv77zzzoR+Lu5nF2Xvkf+bb75ZuY3nn38+rVq1Kr311lvps88+S7Hm3tuGDRtSrLe7be+nL3y90zsGGMjZQORb6cg/ArZ4e/3119NBBx00buDtscceadmyZcUf7Xx8+eWXj/uzG2tA730588wza2+rN/zjBMWN7a/49VmzZnXOd+gdauLz2bNnT2gbxe352B8aBhhggIG2GIiAHgv/Pffcs3TU/8knn6Qdd9xxwkG3+eabp5UrV5YGgHi8fKuttprwNoqFmcrw796Pww47LH355ZelNZ1xxhkDrae7Te/9AWCAAQYYmEoDpfBfvHhxKeQWLVpUO+R22mmn9Ouvv5a2M9Gj7d5CtCH84z7dfPPNpfU88MADtevSuzaf+8VngAEGGJgqA6Xwf+GFF0ohN+gZ7suXLy9t58orrxwoLNsS/vPnzy+t5+uvv05x7sJUNc1+/cFggAEGGBjGQCn8X3vttVLIXXLJJQMF3NKlSzsPH/z000+dk+euvfbagbbTlvDfbrvtSnWJhzKGKbqf9UvLAAMMMDCVBkrhf+ONN5ZCLi7cM8gRbjzGP+jj/MVitCX8Tz/99FJd4tkNxfvpY7/EDDDAAAPTyUAp/I888shSyMUnS5YsSVtsscWUhF1bwj8e4y/enPDnl3w6/ZK7r7wywECvgci0sbP942z97777rphznY8//vjjzvPbd9lll0aHgKkO//ivR7yOQfEExngoY2NXL+wtrs/9wjHAAAMMtNFAKfzjDh5zzDHp+++/7xsA4gtx8Z8I5FtuuSWdcMIJKV7oZ5SLmorwjwEont54/PHHp7jwT/EWj/UffPDBI13zKOtp2/4IMcAAAwyEgbiNHfl3UcSL83z44YfF3Kv8OF4w5+WXX0433XRTZxiY7IcHRhH+cZ/XrVtX+fbHH3+UrnNQXHTcl912203wT5NXrOpa9t4fOgYYYKDfQGX4R6F22GGHtGLFimL+jfvxN998k+65554UF8aZjGKPIvzHXUTFN8SwEJc0now12UY/QjVREwYYYKBZAxF1fUf+xSYccsgh6e67707x3PaJ3v7555903333dQaI4rbqftyW8I91x5qeeuqpdOCBBxoCHP0zwAADDExrA+OGfzew4+S3GASuueaa9OKLL6bffvtt3Fngiy++SPvss8/ABRpF+L/xxhvpmWeeqXx79tln0yuvvJLixX+qTnyMBf/www/pqKOOGnhN3Xp63+yUq97qzQADDPzfwITDv7docbLfcccdl+LaAPHiP1Wvghcbj1fI23XXXQcKy1GEf51LDe+1117pwQcf7Bty4uz//fbbb6A19dbR5//HqBZqwQADDDRjYODw721QBHw83l81BAx6LfypDv/uGhcuXJh++eWX0hDw6KOPCn//9mOAAQYYmJYGJi38u0F54oknpk8//bQUlOvXr0+777577QK1JfxjbVdffXVpTTHkxLMiuuv2vplpVZ3VmQEGGBjewFj4x/Pbd955587j+kcfffRQoRYvDdz7H4A4eq7bsDaF//77718K//jk7LPPrr2mujXw/cMjV0M1ZIABBsoGOuEfwV88ge/vv/9O8dK8wxRr9erVpbCMawHU3V6bwj/ue++1D2644Ybaa6pbA99fBqse6sEAAwwMb6AT/lHIeBGf4m3QV/TrNuX6668vbi7dcccdtYOybeG/Zs2a0poGfanibo28Hx6wGqohAwwwUN9AhFnnef5PPvlkKdjiyn3DFDSeE1+8XXbZZbW316bw33777fseyjjiiCNqr2mYmvrZ+sDVTM0YYICBfgNj4X/eeecVs7pzUZtBr2o3e/bsFJfRLd7iRMC6DWhT+C9YsKC4nM6L/Wy55Za111S3Br6/H62aqAkDDDAwnIEItM6RfwRZvHBN8RYBfv7559cKuJkzZ6bel8CNx8rjvIK6zWpL+M+bNy/9+OOPxdKkl156qfZ66q7f9w+HW/3UjwEGGKg2MBb+UaB4nL/qFmE+a9asccMu/lPwwQcf9G3iggsuGPdnqxo01eEfJz3GwxVfffVVaU3xTIZTTjlloDVVrdPXqnGqi7owwAADozEQoVa6tn9ck7/qtmHDhvTee++lhx9+OMWJbvPnz++8LV68ON17771p1apVKZ7P33t77LHHBjrqj4aPIvzj0sSPPPLIRt+eeOKJtHLlyvT222+nWHPVbZBnLgA8GsDqqq4MMMBAfQORbaXwj5flffzxx6syr/bXImjjMsCDNmYU4V97ET0/sHz58oGHmUHr4Ofqw1YzNWOAAQY2biCirRT+3WKdc845tV7Jr5iRcSncpUuXpmFPiGtT+Md/AqImw66pW1/vN45SbdSGAQYYGK2BjYZ/FH7u3LnpiiuuSCtWrOg7e78Y9vEY+Nq1azv/Sl+yZEmKK/xNRuOmIvzXrVvXuZhPPNVx2bJl6bbbbus8vDEZ67GN0WJWX/VlgAEGJmZgk+FfLOK2226bjj322HTWWWelRYsWpbiITxzdx1P45syZMylhX9yfjyfWQHVSJwYYYICBugYmHP51N+z7YWSAAQYYYKCdBoS/l6P0XxsGGGCAgcwMCP/MGm4Kb+cUri/6wgADTRoQ/sLfxM8AAwwwkJkB4Z9Zw5ucLO3LkQwDDDDQTgPCX/ib+BlggAEGMjMg/DNruCm8nVO4vugLAww0aUD4C38TPwMMMMBAZgaEf2YNb3KytC9HMgwwwEA7DQh/4W/iZ4ABBhjIzIDwz6zhpvB2TuH6oi8MMNCkAeEv/E38DDDAAAOZGRD+mTW8ycnSvhzJMMAAA+00IPyFv4mfAQYYYCAzA8I/s4abwts5heuLvjDAQJMGhL/wN/EzwAADDGRmQPhn1vAmJ0v7ciTDAAMMtNOA8Bf+Jn4GGGCAgcwMCP/MGm4Kb+cUri/6wgADTRoQ/sLfxM8AAwwwkJkB4Z9Zw5ucLO3LkQwDDDDQTgPCX/ib+BlggAEGMjMg/DNruCm8nVO4vugLAww0aUD4C38TPwMMMMBAZgaEf2YNb3KytC9HMgwwwEA7DQh/4W/iZ4ABBhjIzIDwz6zhpvB2TuH6oi8MMNCkAeEv/E38DDDAAAOZGRD+mTW8ycnSvhzJMMAAA+00IPyFv4mfAQYYYCAzA8I/s4abwts5heuLvjDAQJMGhL/wN/EzwAADDGRmQPhn1vAmJ0v7ciTDAAMMtNOA8Bf+Jn4GGGCAgcwMCP/MGm4Kb+cUri/6wgADTRoQ/sLfxM8AAwwwkJkB4Z9Zw5ucLO3LkQwDDDDQTgPCX/ib+BlggAEGMjMg/DNruCm8nVO4vugLAww0aUD4C38TPwMMMMBAZgaEf2YNb3KytC9HMgwwwEA7DQh/4W/iZ4ABBhjIzIDwz6zhpvB2TuH6oi8MMNCkAeEv/E38DDDAAAOZGRD+mTW8ycnSvhzJMMAAA+00IPyFv4mfAQYYYCAzA8I/s4abwts5heuLvjDAQJMGhL/wN/EzwAADDGRmQPhn1vAmJ0v7ciTDAAMMtNOA8Bf+Jn4GGGCAgcwMCP/MGm4Kb+cUri/6wgADTRoQ/sLfxM8AAwwwkJkB4Z9Zw5ucLO3LkQwDDDDQTgPCX/ib+BlggAEGMjMg/DNruCm8nVO4vugLAww0aUD4C38TPwMMMMBAZgaEf2YNb3KytC9HMgwwwEA7DQh/4W/iZ4ABBhjIzIDwz6zhpvB2TuH6oi8MMNCkAeEv/E38DDDAAAOZGRD+mTW8ycnSvhzJMMAAA+00IPyFv4mfAQYYYCAzA8I/s4abwts5heuLvjDAQJMGhL/wN/EzwAADDGRmQPhn1vAmJ0v7ciTDAAMMtNOA8Bf+Jn4GGGCAgcwMCP/MGm4Kb+cUri/6wgADTRoQ/sLfxM8AAwwwkJkB4Z9Zw5ucLO3LkQwDDDDQTgPCX/ib+BlggAEGMjMg/DNruCm8nVO4vugLAww0aUD4C38TPwMMMMBAZgaEf2YNb3KytC9HMgwwwEA7DQh/4W/iZ4ABBhjIzIDwz6zhpvB2TuH6oi8MMNCkAeEv/E38DDDAAAOZGRD+mTW8ycnSvhzJMMAAA+00EOH/P69ek53PunEWAAAAAElFTkSuQmCC"},645:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1-前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-前言"}},[t._v("#")]),t._v(" 1 前言")]),t._v(" "),s("p",[t._v("这段时间的工作需要研究stb_truetype库，因此本篇文章记录一下该库的基本用法。stb_truetype是一个常见字体加载库, 只有一个头文件, 功能虽没有 FreeType 库强大，但代码量小很多，在Flash非常小的开发板上也可以用，觉得 FreeType 库太大的，可以考虑使用stb_truetype库。")]),t._v(" "),s("blockquote",[s("p",[t._v("备注：stb库的GitHub仓库："),s("a",{attrs:{href:"https://github.com/nothings/stb",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/nothings/stb"),s("OutboundLink")],1),t._v("。")])]),t._v(" "),s("h2",{attrs:{id:"_2-stb-truetype解析ttf字体"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-stb-truetype解析ttf字体"}},[t._v("#")]),t._v(" 2 stb_truetype解析ttf字体")]),t._v(" "),s("p",[t._v("使用stb_truetype库解析ttf字体的步骤通常如下：")]),t._v(" "),s("ol",[s("li",[t._v("加载并初始化ttf字体文件；")]),t._v(" "),s("li",[t._v("设置字体大小（字号）并计算缩放比例；")]),t._v(" "),s("li",[t._v("获取垂直方向上的度量并根据缩放比例调整，比如字高、行间距等；")]),t._v(" "),s("li",[t._v("获取水平方向上的度量，比如字宽、字间距等；")]),t._v(" "),s("li",[t._v("获取字符图片的边框（每个字符转化为图像的边界）；")]),t._v(" "),s("li",[t._v("调整每个字体图像的宽高（代码中的x、y），并渲染字体；")])]),t._v(" "),s("p",[t._v("至此，解析ttf字体已完成，附加步骤为使用stb_image_write库将渲染出来的图像保存为本地图片，下面直接上代码：")]),t._v(" "),s("blockquote",[s("p",[t._v("注意：在包含stb_truetype.h头文件的时候需要定义 "),s("code",[t._v("STB_TRUETYPE_IMPLEMENTATION")]),t._v("，否则将会无法使用。")])]),t._v(" "),s("div",{staticClass:"language-c extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("<stdio.h>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("<stdlib.h>")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro-name"}},[t._v("STB_IMAGE_WRITE_IMPLEMENTATION")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stb_image_write.h"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* http://nothings.org/stb/stb_image_write.h */")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token macro-name"}},[t._v("STB_TRUETYPE_IMPLEMENTATION")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token macro property"}},[s("span",{pre:!0,attrs:{class:"token directive-hash"}},[t._v("#")]),s("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stb_truetype.h"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* http://nothings.org/stb/stb_truetype.h */")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" argc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("argv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 加载字体（.ttf）文件 */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" size "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("fontBuffer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    FILE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("fontFile "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fopen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"font/default.ttf"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fontFile "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Can not open font file!\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fseek")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fontFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SEEK_END")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 设置文件指针到文件尾，基于文件尾偏移0字节 */")]),t._v("\n    size "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ftell")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fontFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 获取文件大小（文件尾 - 文件头  单位：字节） */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fseek")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fontFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SEEK_SET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 重新设置文件指针到文件头 */")]),t._v("\n\n    fontBuffer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("calloc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sizeof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fontBuffer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fontFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fclose")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fontFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 初始化字体 */")]),t._v("\n    stbtt_fontinfo info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stbtt_InitFont")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fontBuffer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stb init font failed\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 创建位图 */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" bitmap_w "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("512")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 位图的宽 */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" bitmap_h "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 位图的高 */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("bitmap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("calloc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bitmap_w "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" bitmap_h"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sizeof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* "STB"的 unicode 编码 */')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" word"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x53")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x54")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x42")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 计算字体缩放 */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")]),t._v(" pixels "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("64.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("                                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 字体大小（字号） */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("float")]),t._v(" scale "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stbtt_ScaleForPixelHeight")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pixels"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* scale = pixels / (ascent - descent) */")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** \n     * 获取垂直方向上的度量 \n     * ascent：字体从基线到顶部的高度；\n     * descent：基线到底部的高度，通常为负值；\n     * lineGap：两个字体之间的间距；\n     * 行间距为：ascent - descent + lineGap。\n    */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" ascent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" descent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" lineGap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stbtt_GetFontVMetrics")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("ascent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("descent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("lineGap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 根据缩放调整字高 */")]),t._v("\n    ascent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("roundf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ascent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" scale"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    descent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("roundf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("descent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" scale"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*位图的x*/")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 循环加载word中每个字符 */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("strlen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("word"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** \n          * 获取水平方向上的度量\n          * advanceWidth：字宽；\n          * leftSideBearing：左侧位置；\n        */")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" advanceWidth "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" leftSideBearing "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stbtt_GetCodepointHMetrics")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" word"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("advanceWidth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("leftSideBearing"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 获取字符的边框（边界） */")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" c_x1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" c_y1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" c_x2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" c_y2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stbtt_GetCodepointBitmapBox")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" word"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" scale"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" scale"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("c_x1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("c_y1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("c_x2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("c_y2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 计算位图的y (不同字符的高度不同） */")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ascent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" c_y1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 渲染字符 */")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" byteOffset "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("roundf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("leftSideBearing "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" scale"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" bitmap_w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stbtt_MakeCodepointBitmap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bitmap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" byteOffset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" c_x2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" c_x1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" c_y2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" c_y1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bitmap_w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" scale"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" scale"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" word"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 调整x */")]),t._v("\n        x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("roundf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("advanceWidth "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" scale"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 调整字距 */")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" kern"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        kern "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stbtt_GetCodepointKernAdvance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" word"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" word"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("roundf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("kern "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" scale"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 将位图数据保存到1通道的png图像中 */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stbi_write_png")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"STB.png"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bitmap_w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bitmap_h"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bitmap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bitmap_w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fontBuffer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bitmap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("运行后可以见STB.png图片，效果如下：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(499),alt:"STB.png"}})]),t._v(" "),s("h2",{attrs:{id:"_3-总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-总结"}},[t._v("#")]),t._v(" 3 总结")]),t._v(" "),s("p",[t._v("以上便是stb_truetype库的基本用法，可以看出使用过程比较简单，其中需要调整的参数主要是字体大小（字号），使用过程中需要注意以下两点：")]),t._v(" "),s("ol",[s("li",[t._v("上面已经提过，这里再提一遍，在包含stb_truetype.h头文件的时候需要定义STB_TRUETYPE_IMPLEMENTATION，否则将会无法使用。")]),t._v(" "),s("li",[t._v("调用stb_truetype库函数传入的字符编码必须是unicode编码。")])])])}),[],!1,null,null,null);s.default=e.exports}}]);