(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{649:function(t,a,s){"use strict";s.r(a);var n=s(2),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1-前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-前言"}},[t._v("#")]),t._v(" 1 前言")]),t._v(" "),a("p",[t._v("上周简单介绍了AWTK-MVVM，并按照规则设计了图书管理系统的Model，详见文章："),a("RouterLink",{attrs:{to:"/blog/gui/awtk_mvvm_1.html"}},[t._v("AWTK-MVVM学习（一）")]),t._v("。本周学习了AWTK-MVVM的数据绑定和命令绑定，本文记录其中的关键内容，更详细的教程请参考 "),a("code",[t._v("awtk-mvvm/docs")]),t._v(" 下的md文档。")],1),t._v(" "),a("blockquote",[a("p",[t._v("备注：前往 GitHub 下载 "),a("a",{attrs:{href:"http://github.com/zlgopen/awtk-mvvm",target:"_blank",rel:"noopener noreferrer"}},[t._v("awtk-mvvm"),a("OutboundLink")],1),t._v("。")])]),t._v(" "),a("h2",{attrs:{id:"_2-数据绑定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-数据绑定"}},[t._v("#")]),t._v(" 2 数据绑定")]),t._v(" "),a("p",[t._v("在进行数据绑定之前，先要建立 View（UI界面）与 ViewModel的联系。在AWTK 中用XML文件来描述用户界面，即View，在上周的博客中，设计了一个图书管理系统的Model，可根据注释生成 ViewModel 的代码，实现数据绑定的步骤如下：")]),t._v(" "),a("p",[t._v("步骤一：为界面绑定模型，即将 View 与 ViewModel 关联起来，在AWTK-MVVM中有一个 v-model 属性，该属性用来指定 ViewModel 的名称，将控件与模型绑定起来，通常我们在窗口上指定，XML如下：")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("window")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-model")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("book_controller"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n...\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("window")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("步骤二：为控件绑定数据，即将某些控件的属性与 Model 中的指定属性（变量）绑定起来，这个绑定的具体操作由 ViewModel 完成，我们只需要在XML文件中指定属性即可，例如将 label 控件的文本（text属性）和 Model 中的书名（title属性）绑定，XML如下：")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("window")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-model")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("book_controller"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  ...\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("label")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("x")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("center"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("y")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("middle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("w")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("50%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("40"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("title"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("v-data:")]),t._v("text")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{item.title}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  ...\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("window")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("其中 "),a("code",[t._v('v-data:text="{item.title}"')]),t._v(" 的具体说明如下：")]),t._v(" "),a("ul",[a("li",[t._v("v-data 表示该属性是一个数据绑定规则。")]),t._v(" "),a("li",[t._v("text 表示控件的属性名称。")]),t._v(" "),a("li",[t._v('item.title 表示Model中的属性，即变量名称，由于此处绑定的为复合数据，因此使用符号 "." 来表示。')])]),t._v(" "),a("blockquote",[a("p",[t._v("备注：此处仅做最简单的示例，详细内容请参考 "),a("code",[t._v("awtk-mvvm/docs/data_binding.md")]),t._v("。")])]),t._v(" "),a("h2",{attrs:{id:"_3-命令绑定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-命令绑定"}},[t._v("#")]),t._v(" 3 命令绑定")]),t._v(" "),a("p",[t._v('命令绑定与数据绑定类似，在AWTK-MVVM中同样通过在XML文件中添加属性完成。AWTK-MVVM中提供一个 v-on 属性，比如添加图书的指令为 "add" ，那么为按钮绑定该指令的XML如下：')]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("window")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-model")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("book_controller"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  ...\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("btn_add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("x")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("132"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("y")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("b:25%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("w")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("100"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("36"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("v-on:")]),t._v("click")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{add}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  ...\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("window")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("其中 "),a("code",[t._v('v-on:click="{add}"')]),t._v(" 的具体说明如下：")]),t._v(" "),a("ul",[a("li",[t._v("v-on 表示该属性是一个命令绑定规则。")]),t._v(" "),a("li",[t._v("click 表示绑定一个点击事件。")]),t._v(" "),a("li",[t._v("add 表示绑定的命令为 add。")])]),t._v(" "),a("p",[t._v("目前AWTK-MVVM提供的命令如下，后续还会持续更新：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("命令")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("click")]),t._v(" "),a("td",[t._v("点击事件")])]),t._v(" "),a("tr",[a("td",[t._v("pointer_down")]),t._v(" "),a("td",[t._v("指针按下事件")])]),t._v(" "),a("tr",[a("td",[t._v("pointer_up")]),t._v(" "),a("td",[t._v("指针松开事件")])]),t._v(" "),a("tr",[a("td",[t._v("key_down")]),t._v(" "),a("td",[t._v("按键按下事件")])]),t._v(" "),a("tr",[a("td",[t._v("key_long_press")]),t._v(" "),a("td",[t._v("按键长按事")])]),t._v(" "),a("tr",[a("td",[t._v("key_up")]),t._v(" "),a("td",[t._v("按键松开事件")])]),t._v(" "),a("tr",[a("td",[t._v("global_key_down")]),t._v(" "),a("td",[t._v("全局按键按下事件")])]),t._v(" "),a("tr",[a("td",[t._v("global_key_long_press")]),t._v(" "),a("td",[t._v("全局按键长按事件")])]),t._v(" "),a("tr",[a("td",[t._v("global_key_up")]),t._v(" "),a("td",[t._v("全局按键松开事件")])]),t._v(" "),a("tr",[a("td",[t._v("value_changed")]),t._v(" "),a("td",[t._v("值改变事件")])]),t._v(" "),a("tr",[a("td",[t._v("value_changed_by_ui")]),t._v(" "),a("td",[t._v("值（通过 UI 修改）改变事件")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("备注：此处仅做最简单的示例，详细内容请参考 "),a("code",[t._v("awtk-mvvm/docs/command_binding.md")]),t._v("。")])])])}),[],!1,null,null,null);a.default=e.exports}}]);