(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{662:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1-前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-前言"}},[t._v("#")]),t._v(" 1 前言")]),t._v(" "),s("p",[t._v("近期工作内容需要研究 Windows 平台的进程，因此将学习的内容简单整理一下，希望对自己与各位有所帮助。")]),t._v(" "),s("h2",{attrs:{id:"_2-进程的概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-进程的概念"}},[t._v("#")]),t._v(" 2 进程的概念")]),t._v(" "),s("p",[t._v("进程是"),s("strong",[t._v("资源分配的基本单位")]),t._v("，也是"),s("strong",[t._v("独立运行的基本单位")]),t._v("。通俗讲就是一段程序执行的过程。")]),t._v(" "),s("p",[t._v("进程由两部分构成，一部分指一个"),s("strong",[t._v("内核对象")]),t._v("，操作系统用它来管理进程，也是系统保存进程统计信息的地方。另一部分由"),s("strong",[t._v("地址空间")]),t._v("构成，包括文本区、数据区、堆栈区。文本区存储处理器执行的代码，数据区存储变量和进程执行期间使用的的动态内存分配，堆栈区存储活动过程中调用的指令和本地变量。")]),t._v(" "),s("h2",{attrs:{id:"_3-进程的三种状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-进程的三种状态"}},[t._v("#")]),t._v(" 3 进程的三种状态")]),t._v(" "),s("p",[t._v("进程在运行过程中不断改变其运行状态，通常情况下，一个运行进程必须具有以下三种状态：")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("就绪（Ready)")]),t._v("：当进程分配到除了CPU以外的所有必要资源，只要处理器分配资源就能立马执行时的状态。")]),t._v(" "),s("li",[s("strong",[t._v("运行(Running)")]),t._v("：当进程已经获得处理器的资源分配，进程正在运行的状态。")]),t._v(" "),s("li",[s("strong",[t._v("阻塞(Blockjer)")]),t._v("：正在执行的进程，由于等待某个事件发生而无法执行时，便放弃资源分配而处于阻塞状态，例如等待I/O完成，申请缓冲区不能满足，等待信号等等。")])]),t._v(" "),s("h2",{attrs:{id:"_4-进程的创建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-进程的创建"}},[t._v("#")]),t._v(" 4 进程的创建")]),t._v(" "),s("p",[t._v("Windows平台创建进程的常用方法：")]),t._v(" "),s("ol",[s("li",[t._v("Winexec()；")]),t._v(" "),s("li",[t._v("ShellExcute()；")]),t._v(" "),s("li",[t._v("CreateProcess()。")])]),t._v(" "),s("h3",{attrs:{id:"_4-1-winexec"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-winexec"}},[t._v("#")]),t._v(" 4.1 Winexec")]),t._v(" "),s("h4",{attrs:{id:"_4-1-1-函数原型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-1-函数原型"}},[t._v("#")]),t._v(" 4.1.1 函数原型")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[t._v("UINT "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("WinExec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" \nLPCSTR lpCmdLine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 路径名（可以带cmd命令行）")]),t._v("\nUINT uCmdShow      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 显示状态);")]),t._v("\n")])])]),s("p",[t._v("如果 lpCmdLine 中可执行文件的名称不包含目录路径，则系统将按以下顺序搜索可执行文件的路径：")]),t._v(" "),s("ol",[s("li",[t._v("加载应用程序的目录；")]),t._v(" "),s("li",[t._v("当前目录；")]),t._v(" "),s("li",[t._v("Windows系统目录：GetSystemDirectory()接口获取此目录的路径；")]),t._v(" "),s("li",[t._v("Windows目录：GetWindowsDirectory()接口获取此目录的路径；")]),t._v(" "),s("li",[t._v("PATH环境变量中列出的目录；")])]),t._v(" "),s("h4",{attrs:{id:"_4-1-2-示例代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-2-示例代码"}},[t._v("#")]),t._v(" 4.1.2 示例代码")]),t._v(" "),s("ol",[s("li",[t._v("打开进程：")])]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[t._v("UINT nRet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("WinExec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\\\Users\\\\shadow\\\\Desktop\\\\depends.exe"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 进程路径名")]),t._v("\n    SW_SHOW     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 显示状态")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("Winexec()接口还可以启动 cmd，包括带参参数启动，比如：")]),t._v(" "),s("p",[t._v("（1）/k 并显示控制台窗口；\n（2）/c  执行命令并关闭控制台窗口。")]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("打开注册表：")])]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[t._v("UINT nRet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("WinExec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cmd.exe /c regedit"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" SW_SHOW"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("修改uac权限：")])]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[t._v("UINT nRet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("WinExec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cmd /k %windir%\\\\System32\\\\reg.exe ADD HKLM\\\\SOFTWARE\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Policies\\\\System /v EnableLUA /t REG_DWORD /d 0 /f"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("SW_SHOW"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_4-2-shellexcute"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-shellexcute"}},[t._v("#")]),t._v(" 4.2 ShellExcute")]),t._v(" "),s("h4",{attrs:{id:"_4-2-1-函数原型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-函数原型"}},[t._v("#")]),t._v(" 4.2.1 函数原型")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[t._v("HINSTANCE "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ShellExecute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      HWND hwnd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定窗口的句柄")]),t._v("\n      LPCTSTR lpOperation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定要进行的操作")]),t._v("\n      LPCTSTR lpFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 文件路径")]),t._v("\n      LPCTSTR lpParameters"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 若lpFile是可执行文件，则此参数指定命令行参数")]),t._v("\n      LPCTSTR lpDirectory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定默认目录")]),t._v("\n      INT nShowCmd          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定程序窗口初始化显示方式")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"_4-2-2-示例代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-示例代码"}},[t._v("#")]),t._v(" 4.2.2 示例代码")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 打开进程 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ShellExecute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"open"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\\\Users\\\\shadow\\\\Desktop\\\\depends.exe"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("SW_SHOWNORMAL"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 打开网址 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ShellExecute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"open"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"www.baidu.com/s?wd=\\"拼音\\""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("SW_SHOW"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 浏览文件夹 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ShellExecute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"explore"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:\\\\360"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" SW_SHOWNORMAL"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 打印指定文件 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ShellExecute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"print"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\\\Users\\\\shadow\\\\Desktop\\\\t.txt"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" SW_HIDE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 自动搜索exe路径 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ShellExecute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"open"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cmd.exe"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/k dir"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" SW_SHOWNORMAL"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n\n")])])]),s("h3",{attrs:{id:"_4-3-createprocess"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-createprocess"}},[t._v("#")]),t._v(" 4.3 CreateProcess")]),t._v(" "),s("h4",{attrs:{id:"_4-3-1-函数原型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-1-函数原型"}},[t._v("#")]),t._v(" 4.3.1 函数原型")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[t._v("BOOL "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateProcess")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\nLPCTSTR lpApplicationName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 应用程序名称（路径）")]),t._v("\nLPTSTR lpCommandLine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 命令行字符串")]),t._v("\nLPSECURITY_ATTRIBUTES lpProcessAttributes，"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 进程安全性")]),t._v("\nLPSECURITY_ATTRIBUTES lpThreadAttributes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 线程安全性")]),t._v("\nBOOL bInheritHandles"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否继承父进程属性")]),t._v("\nDWORD dwCreationFlags"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建标志符，比如CREATE_NEW_CONSOLE表示创建一个新的控制台，具体请查阅MSDN")]),t._v("\nLPVOID lpEnvironment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指向新的环境块的指针，指向一个新进程的环境块，如果该参数为空，新进程使用调用进程环境")]),t._v("\nLPCTSTR lpCurrentDirectory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指向一个以NULL结尾的字符串，该字符串用来指定子进程的工作路径。")]),t._v("\nLPSTARTUPINFO lpStartupInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("               "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 传递给新进程的信息")]),t._v("\nLPPROCESS_INFORMATION lpProcessInformation "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新进程返回的信息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"_4-3-2-示例代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-2-示例代码"}},[t._v("#")]),t._v(" 4.3.2 示例代码")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CProcessDlg")]),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("OnBnClickedButton")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    STARTUPINFO si "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    si"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cb "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sizeof")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("si"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    PROCESS_INFORMATION pi "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    BOOL bRet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateProcess")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\\\Users\\\\shadow\\\\Desktop\\\\depends.exe"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//命令行参数")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        FALSE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//没有别的需求，创建标志填0")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//环境块")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//当前目录")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("si"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//启动进程一些配置")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("pi\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("bRet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AfxMessageBox")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Create Process FAIL!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"_5-进程的退出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-进程的退出"}},[t._v("#")]),t._v(" 5 进程的退出")]),t._v(" "),s("ol",[s("li",[t._v("ExitProcess(0);执行后直接退出进程，后边代码将无法执行；")]),t._v(" "),s("li",[t._v("TerminateProcess （不推荐使用，因为目标进程没有机会清理资源）；")]),t._v(" "),s("li",[t._v("进程中的所有线程自行终止运行（这种情况几乎从未发生）；")]),t._v(" "),s("li",[t._v("主线程的入口函数返回（最好使用这个方法)；")])])])}),[],!1,null,null,null);s.default=e.exports}}]);